# PR Reviewer Assignment Service

Сервис для автоматического назначения ревьюеров на Pull Request’ы внутри команд. Позволяет создавать PR, назначать ревьюеров, переназначать их, а также управлять командами и активностью пользователей.

## Стек

* Язык: Go
* База данных: PostgreSQL
* Миграции: Goose
* Запуск и зависимости: Docker Compose

---

## Установка и запуск

1. Склонировать репозиторий:

```bash
git clone <репозиторий>
cd <папка проекта>
```

2. Создать файл `.env` на основе примера:

```bash
cp .env.example .env
```
3. Поднять сервис:

```bash
docker compose up --build
```

* Контейнер `db` поднимает PostgreSQL.
* Контейнер `migrator` применяет миграции.
* Контейнер `app` запускает сервис на порту из `.env` (по умолчанию 8080).

---

## Использование API

Все операции доступны через HTTP API (OpenAPI спецификация в `openapi.yaml`):

* Создание PR
* Merge PR
* Переназначение ревьюеров
* Получение списка PR для пользователя
* Управление командами
* Массовая деактивация пользователей команды

> Все операции соблюдают ограничения по активности пользователей и количеству ревьюеров. Merge идемпотентен.

---

## Миграции

* Все миграции находятся в папке `migrations`.
* Используется Goose для применения миграций автоматически при запуске `docker compose up`.


## Дополнительные реализованные задания

* Добавлен простой эндпоинт статистики (`/stats`), который позволяет получить количество назначений по пользователям и по PR.
* Реализован метод массовой деактивации пользователей команды и безопасная переназначаемость открытых PR. 
* Описана конфигурация линтера `golangci-lint`.
* Создан файл для нагрузочного тестирования на k6 (`load_test.js`). Полноценное проведение тестирования не успел :(